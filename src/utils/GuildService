
import { BehaviorSubject } from 'rxjs';

interface Guild {
  id: string;
  name: string;
  icon_url: string;
  channels: Channel[];
}

class GuildService {
  private guilds: Map<string, BehaviorSubject<Guild>> = new Map();

  public getGuildObservable(guildId: string): BehaviorSubject<Guild> {
    if (!this.guilds.has(guildId)) {
      const guildObservable = new BehaviorSubject<Guild>({ id: guildId, name: '', channels: [] });
      this.guilds.set(guildId, guildObservable);
    }
    return this.guilds.get(guildId)!;
  }

  public updateGuild(guild: Guild): void {
    const guildObservable = this.guilds.get(guild.id);
    if (guildObservable) {
      guildObservable.next(guild);
    }
  }
}
